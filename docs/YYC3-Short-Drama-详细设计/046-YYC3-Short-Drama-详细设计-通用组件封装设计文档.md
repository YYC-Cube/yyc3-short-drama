---
@file: 046-YYC3-Short-Drama-è¯¦ç»†è®¾è®¡-é€šç”¨ç»„ä»¶å°è£…è®¾è®¡æ–‡æ¡£.md
@description: YYC3-Short-Drama å‰ç«¯/åç«¯é€šç”¨ç»„ä»¶çš„å°è£…åŸåˆ™ä¸å¤ç”¨è§„èŒƒï¼Œæå‡å¼€å‘æ•ˆç‡
@author: YanYuCloudCube Team
@version: v1.0.0
@created: 2025-12-31
@updated: 2026-01-24
@status: published
@tags: [è¯¦ç»†è®¾è®¡],[ç»„ä»¶å°è£…],[å¤ç”¨è®¾è®¡]
---

> ***YanYuCloudCube***
> è¨€å¯è±¡é™ | è¯­æ¢æœªæ¥
> ***Words Initiate Quadrants, Language Serves as Core for the Future***
> ä¸‡è±¡å½’å…ƒäºäº‘æ¢ | æ·±æ ˆæ™ºå¯æ–°çºªå…ƒ
> ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***

---

# 046-YYC3-Short-Drama-è¯¦ç»†è®¾è®¡-é€šç”¨ç»„ä»¶å°è£…è®¾è®¡æ–‡æ¡£

## æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°YYC3-Short-DramaçŸ­å‰§å¹³å°çš„é€šç”¨ç»„ä»¶å°è£…è®¾è®¡ï¼ŒåŒ…æ‹¬å‰ç«¯/åç«¯é€šç”¨ç»„ä»¶çš„å°è£…åŸåˆ™ä¸å¤ç”¨è§„èŒƒï¼Œä¸ºå¼€å‘å›¢é˜Ÿæä¾›æ¸…æ™°çš„ç»„ä»¶å¼€å‘æŒ‡å¯¼ã€‚

## æ ¸å¿ƒå†…å®¹

### 1. èƒŒæ™¯ä¸ç›®æ ‡

#### 1.1 é¡¹ç›®èƒŒæ™¯
YYC3-Short-Dramaé¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºã€Œäº”é«˜äº”æ ‡äº”åŒ–ã€ç†å¿µçš„AIé©±åŠ¨çŸ­å‰§åˆ›ä½œä¸åˆ†å‘å¹³å°ï¼Œè‡´åŠ›äºé€šè¿‡äººå·¥æ™ºèƒ½æŠ€æœ¯èµ‹èƒ½çŸ­å‰§å†…å®¹åˆ›ä½œï¼Œæ‰“é€ æ™ºèƒ½åŒ–çš„çŸ­å‰§ç”Ÿæ€ä½“ç³»ã€‚å¹³å°èåˆAIå‰§æœ¬ç”Ÿæˆã€æ™ºèƒ½æ¨èã€VR/ARæ²‰æµ¸å¼ä½“éªŒã€æ˜Ÿå€¼ç»æµä½“ç³»ç­‰åˆ›æ–°åŠŸèƒ½ï¼Œä¸ºç”¨æˆ·æä¾›ä»åˆ›ä½œåˆ°æ¶ˆè´¹çš„å…¨é“¾è·¯æœåŠ¡ã€‚é€šç”¨ç»„ä»¶çš„å°è£…å’Œå¤ç”¨æ˜¯æå‡å¼€å‘æ•ˆç‡ã€ä¿è¯ä»£ç è´¨é‡çš„å…³é”®ã€‚

#### 1.2 æ–‡æ¡£ç›®æ ‡
- æä¾›å®Œæ•´çš„é€šç”¨ç»„ä»¶å°è£…è®¾è®¡è§„èŒƒ
- è¯¦ç»†æè¿°å‰ç«¯å’Œåç«¯é€šç”¨ç»„ä»¶çš„è®¾è®¡åŸåˆ™
- æä¾›ç»„ä»¶å¤ç”¨è§„èŒƒå’Œæœ€ä½³å®è·µ
- ä¸ºå¼€å‘å›¢é˜Ÿæä¾›æ¸…æ™°çš„ç»„ä»¶å¼€å‘æŒ‡å¯¼
- ç¡®ä¿ç»„ä»¶å¼€å‘ç¬¦åˆYYCÂ³æ ‡å‡†è§„èŒƒ

### 2. è®¾è®¡åŸåˆ™

#### 2.1 äº”é«˜åŸåˆ™
- **é«˜å¯ç”¨æ€§**ï¼šç¡®ä¿ç»„ä»¶ç¨³å®šè¿è¡Œï¼Œä¿éšœç”¨æˆ·ä½“éªŒ
- **é«˜æ€§èƒ½**ï¼šä¼˜åŒ–ç»„ä»¶æ¸²æŸ“å’Œæ‰§è¡Œæ€§èƒ½ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- **é«˜å®‰å…¨æ€§**ï¼šä¿æŠ¤ç»„ä»¶ä¸­çš„æ•°æ®å’Œéšç§å®‰å…¨ï¼Œå»ºç«‹å®‰å…¨é˜²æŠ¤
- **é«˜æ‰©å±•æ€§**ï¼šæ”¯æŒç»„ä»¶å¿«é€Ÿæ‰©å±•ï¼Œé€‚åº”ä¸šåŠ¡éœ€æ±‚å˜åŒ–
- **é«˜å¯ç»´æŠ¤æ€§**ï¼šä¾¿äºåç»­ç»´æŠ¤å’Œå‡çº§ï¼Œé™ä½ç»´æŠ¤æˆæœ¬

#### 2.2 äº”æ ‡ä½“ç³»
- **æ ‡å‡†åŒ–**ï¼šç»Ÿä¸€çš„ç»„ä»¶è®¾è®¡å’Œå¼€å‘æ ‡å‡†
- **è§„èŒƒåŒ–**ï¼šä¸¥æ ¼çš„ç»„ä»¶ç¼–ç è§„èŒƒå’Œä»£ç å®¡æŸ¥
- **è‡ªåŠ¨åŒ–**ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·æé«˜ç»„ä»¶å¼€å‘æ•ˆç‡
- **æ™ºèƒ½åŒ–**ï¼šä½¿ç”¨æ™ºèƒ½å·¥å…·è¾…åŠ©ç»„ä»¶å¼€å‘
- **å¯è§†åŒ–**ï¼šä½¿ç”¨å¯è§†åŒ–å·¥å…·ç›‘æ§ç»„ä»¶çŠ¶æ€

#### 2.3 äº”åŒ–æ¶æ„
- **æµç¨‹åŒ–**ï¼šæ ‡å‡†åŒ–çš„ç»„ä»¶å¼€å‘æµç¨‹å’Œå®¡æŸ¥æµç¨‹
- **æ–‡æ¡£åŒ–**ï¼šå®Œå–„çš„ç»„ä»¶æ³¨é‡Šå’Œæ–‡æ¡£
- **å·¥å…·åŒ–**ï¼šä½¿ç”¨é«˜æ•ˆçš„ç»„ä»¶å¼€å‘å·¥å…·å’Œæµ‹è¯•å·¥å…·
- **æ•°å­—åŒ–**ï¼šä½¿ç”¨æ•°å­—åŒ–å·¥å…·ç®¡ç†ç»„ä»¶
- **ç”Ÿæ€åŒ–**ï¼šä½¿ç”¨å¼€æºç»„ä»¶åº“å’Œæ¡†æ¶

### 3. ç»„ä»¶å°è£…åŸåˆ™

#### 3.1 å•ä¸€èŒè´£åŸåˆ™

**åŸåˆ™è¯´æ˜**
- æ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
- ç»„ä»¶å†…éƒ¨é€»è¾‘æ¸…æ™°ï¼ŒèŒè´£æ˜ç¡®
- é¿å…ç»„ä»¶åŠŸèƒ½è¿‡äºå¤æ‚

**ç¤ºä¾‹**
```typescript
// âŒ é”™è¯¯ç¤ºä¾‹ï¼šç»„ä»¶èŒè´£è¿‡å¤š
export const UserCard: React.FC<UserCardProps> = ({ user }) => {
  const [editing, setEditing] = useState(false);
  const [following, setFollowing] = useState(false);
  const [liked, setLiked] = useState(false);

  // ç”¨æˆ·ä¿¡æ¯å±•ç¤º
  // å…³æ³¨åŠŸèƒ½
  // ç‚¹èµåŠŸèƒ½
  // ç¼–è¾‘åŠŸèƒ½
  // ...å¤šä¸ªåŠŸèƒ½æ··åˆåœ¨ä¸€èµ·
};

// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šç»„ä»¶èŒè´£å•ä¸€
export const UserCard: React.FC<UserCardProps> = ({ user }) => {
  return (
    <div className="user-card">
      <UserAvatar user={user} />
      <UserInfo user={user} />
      <UserActions userId={user.userId} />
    </div>
  );
};

export const UserAvatar: React.FC<{ user: User }> = ({ user }) => {
  return <img src={user.avatar} alt={user.nickname} />;
};

export const UserInfo: React.FC<{ user: User }> = ({ user }) => {
  return (
    <div>
      <h3>{user.nickname}</h3>
      <p>{user.bio}</p>
    </div>
  );
};

export const UserActions: React.FC<{ userId: string }> = ({ userId }) => {
  return (
    <div>
      <FollowButton userId={userId} />
      <LikeButton userId={userId} />
    </div>
  );
};
```

#### 3.2 å¼€é—­åŸåˆ™

**åŸåˆ™è¯´æ˜**
- ç»„ä»¶å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
- é€šè¿‡propså’Œé…ç½®æ‰©å±•ç»„ä»¶åŠŸèƒ½
- é¿å…ç›´æ¥ä¿®æ”¹ç»„ä»¶å†…éƒ¨å®ç°

**ç¤ºä¾‹**
```typescript
// âŒ é”™è¯¯ç¤ºä¾‹ï¼šç›´æ¥ä¿®æ”¹ç»„ä»¶
export const Button: React.FC = () => {
  return <button className="btn-primary">ç‚¹å‡»</button>;
};

// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šé€šè¿‡propsæ‰©å±•ç»„ä»¶
export interface ButtonProps {
  type?: 'primary' | 'secondary' | 'danger';
  size?: 'small' | 'medium' | 'large';
  disabled?: boolean;
  loading?: boolean;
  children: React.ReactNode;
  onClick?: () => void;
}

export const Button: React.FC<ButtonProps> = ({
  type = 'primary',
  size = 'medium',
  disabled = false,
  loading = false,
  children,
  onClick,
}) => {
  return (
    <button
      className={`btn btn-${type} btn-${size}`}
      disabled={disabled || loading}
      onClick={onClick}
    >
      {loading ? 'åŠ è½½ä¸­...' : children}
    </button>
  );
};
```

#### 3.3 æ¥å£éš”ç¦»åŸåˆ™

**åŸåˆ™è¯´æ˜**
- ç»„ä»¶æ¥å£åº”è¯¥æœ€å°åŒ–
- åªæš´éœ²å¿…è¦çš„propså’Œæ–¹æ³•
- é¿å…ä¸å¿…è¦çš„ä¾èµ–å’Œè€¦åˆ

**ç¤ºä¾‹**
```typescript
// âŒ é”™è¯¯ç¤ºä¾‹ï¼šæ¥å£è¿‡äºå¤æ‚
export interface UserCardProps {
  user: User;
  onEdit: (user: User) => void;
  onDelete: (userId: string) => void;
  onFollow: (userId: string) => void;
  onUnfollow: (userId: string) => void;
  onLike: (userId: string) => void;
  onUnlike: (userId: string) => void;
  onShare: (userId: string) => void;
  onBlock: (userId: string) => void;
  onReport: (userId: string) => void;
  // ...è¿‡å¤šçš„props
}

// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šæ¥å£æœ€å°åŒ–
export interface UserCardProps {
  user: User;
  onAction?: (action: string, userId: string) => void;
}

export const UserCard: React.FC<UserCardProps> = ({ user, onAction }) => {
  const handleAction = (action: string) => {
    onAction?.(action, user.userId);
  };

  return (
    <div className="user-card">
      <UserAvatar user={user} />
      <UserInfo user={user} />
      <UserActions onAction={handleAction} />
    </div>
  );
};
```

#### 3.4 ä¾èµ–å€’ç½®åŸåˆ™

**åŸåˆ™è¯´æ˜**
- ç»„ä»¶åº”è¯¥ä¾èµ–æŠ½è±¡è€Œä¸æ˜¯å…·ä½“å®ç°
- ä½¿ç”¨ä¾èµ–æ³¨å…¥çš„æ–¹å¼ä¼ é€’ä¾èµ–
- æé«˜ç»„ä»¶çš„å¯æµ‹è¯•æ€§å’Œå¯å¤ç”¨æ€§

**ç¤ºä¾‹**
```typescript
// âŒ é”™è¯¯ç¤ºä¾‹ï¼šç›´æ¥ä¾èµ–å…·ä½“å®ç°
export const UserList: React.FC = () => {
  const [users, setUsers] = useState<User[]>([]);

  useEffect(() => {
    fetch('/api/users')
      .then(res => res.json())
      .then(data => setUsers(data));
  }, []);

  return <div>{/* ç”¨æˆ·åˆ—è¡¨ */}</div>;
};

// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šä¾èµ–æŠ½è±¡
export interface UserService {
  getUsers(): Promise<User[]>;
}

export interface UserListProps {
  userService: UserService;
}

export const UserList: React.FC<UserListProps> = ({ userService }) => {
  const [users, setUsers] = useState<User[]>([]);

  useEffect(() => {
    userService.getUsers().then(setUsers);
  }, [userService]);

  return <div>{/* ç”¨æˆ·åˆ—è¡¨ */}</div>;
};

// ä½¿ç”¨ä¾èµ–æ³¨å…¥
<UserList userService={userService} />
```

### 4. å‰ç«¯é€šç”¨ç»„ä»¶è®¾è®¡

#### 4.1 åŸºç¡€UIç»„ä»¶

**Buttonç»„ä»¶**
```typescript
// shared/components/ui/Button.tsx
import React from 'react';
import { cn } from '@/utils/cn';

export interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary' | 'danger' | 'ghost';
  size?: 'small' | 'medium' | 'large';
  loading?: boolean;
  icon?: React.ReactNode;
  block?: boolean;
}

export const Button: React.FC<ButtonProps> = ({
  variant = 'primary',
  size = 'medium',
  loading = false,
  icon,
  block = false,
  className,
  disabled,
  children,
  ...props
}) => {
  return (
    <button
      className={cn(
        'yyc-button',
        `yyc-button--${variant}`,
        `yyc-button--${size}`,
        block && 'yyc-button--block',
        loading && 'yyc-button--loading',
        className
      )}
      disabled={disabled || loading}
      {...props}
    >
      {loading && <span className="yyc-button__spinner" />}
      {icon && <span className="yyc-button__icon">{icon}</span>}
      <span className="yyc-button__content">{children}</span>
    </button>
  );
};
```

**Inputç»„ä»¶**
```typescript
// shared/components/ui/Input.tsx
import React from 'react';
import { cn } from '@/utils/cn';

export interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  label?: string;
  error?: string;
  prefix?: React.ReactNode;
  suffix?: React.ReactNode;
}

export const Input: React.FC<InputProps> = ({
  label,
  error,
  prefix,
  suffix,
  className,
  ...props
}) => {
  return (
    <div className="yyc-input-wrapper">
      {label && <label className="yyc-input__label">{label}</label>}
      <div className="yyc-input__container">
        {prefix && <span className="yyc-input__prefix">{prefix}</span>}
        <input
          className={cn(
            'yyc-input',
            error && 'yyc-input--error',
            className
          )}
          {...props}
        />
        {suffix && <span className="yyc-input__suffix">{suffix}</span>}
      </div>
      {error && <span className="yyc-input__error">{error}</span>}
    </div>
  );
};
```

**Modalç»„ä»¶**
```typescript
// shared/components/ui/Modal.tsx
import React, { useEffect, useRef } from 'react';
import { cn } from '@/utils/cn';

export interface ModalProps {
  open: boolean;
  onClose: () => void;
  title?: string;
  footer?: React.ReactNode;
  children: React.ReactNode;
  className?: string;
}

export const Modal: React.FC<ModalProps> = ({
  open,
  onClose,
  title,
  footer,
  children,
  className,
}) => {
  const modalRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    const handleEscape = (e: KeyboardEvent) => {
      if (e.key === 'Escape') onClose();
    };

    if (open) {
      document.addEventListener('keydown', handleEscape);
      document.body.style.overflow = 'hidden';
    }

    return () => {
      document.removeEventListener('keydown', handleEscape);
      document.body.style.overflow = '';
    };
  }, [open, onClose]);

  const handleBackdropClick = (e: React.MouseEvent) => {
    if (e.target === modalRef.current) onClose();
  };

  if (!open) return null;

  return (
    <div className="yyc-modal-backdrop" ref={modalRef} onClick={handleBackdropClick}>
      <div className={cn('yyc-modal', className)}>
        {title && (
          <div className="yyc-modal__header">
            <h2 className="yyc-modal__title">{title}</h2>
            <button className="yyc-modal__close" onClick={onClose}>
              Ã—
            </button>
          </div>
        )}
        <div className="yyc-modal__body">{children}</div>
        {footer && <div className="yyc-modal__footer">{footer}</div>}
      </div>
    </div>
  );
};
```

#### 4.2 ä¸šåŠ¡ç»„ä»¶

**UserCardç»„ä»¶**
```typescript
// shared/components/business/UserCard.tsx
import React from 'react';
import { Avatar } from '@/components/ui/Avatar';
import { Button } from '@/components/ui/Button';
import type { User } from '@/types/user';

export interface UserCardProps {
  user: User;
  onFollow?: (userId: string) => void;
  onUnfollow?: (userId: string) => void;
  onMessage?: (userId: string) => void;
  showActions?: boolean;
}

export const UserCard: React.FC<UserCardProps> = ({
  user,
  onFollow,
  onUnfollow,
  onMessage,
  showActions = true,
}) => {
  const [following, setFollowing] = React.useState(user.isFollowing);

  const handleFollow = () => {
    if (following) {
      onUnfollow?.(user.userId);
      setFollowing(false);
    } else {
      onFollow?.(user.userId);
      setFollowing(true);
    }
  };

  return (
    <div className="yyc-user-card">
      <Avatar src={user.avatar} alt={user.nickname} size="large" />
      <div className="yyc-user-card__info">
        <h3 className="yyc-user-card__name">{user.nickname}</h3>
        <p className="yyc-user-card__bio">{user.bio}</p>
        <div className="yyc-user-card__stats">
          <span>{user.followersCount} ç²‰ä¸</span>
          <span>{user.followingCount} å…³æ³¨</span>
        </div>
      </div>
      {showActions && (
        <div className="yyc-user-card__actions">
          <Button
            variant={following ? 'ghost' : 'primary'}
            size="small"
            onClick={handleFollow}
          >
            {following ? 'å·²å…³æ³¨' : 'å…³æ³¨'}
          </Button>
          <Button variant="ghost" size="small" onClick={() => onMessage?.(user.userId)}>
            ç§ä¿¡
          </Button>
        </div>
      )}
    </div>
  );
};
```

**DramaCardç»„ä»¶**
```typescript
// shared/components/business/DramaCard.tsx
import React from 'react';
import { Image } from '@/components/ui/Image';
import { Button } from '@/components/ui/Button';
import type { Drama } from '@/types/drama';

export interface DramaCardProps {
  drama: Drama;
  onClick?: (dramaId: string) => void;
  onLike?: (dramaId: string) => void;
  onFavorite?: (dramaId: string) => void;
  onShare?: (dramaId: string) => void;
  showActions?: boolean;
}

export const DramaCard: React.FC<DramaCardProps> = ({
  drama,
  onClick,
  onLike,
  onFavorite,
  onShare,
  showActions = true,
}) => {
  const [liked, setLiked] = React.useState(drama.isLiked);
  const [favorited, setFavorited] = React.useState(drama.isFavorited);

  const handleLike = () => {
    if (liked) {
      setLiked(false);
    } else {
      setLiked(true);
      onLike?.(drama.dramaId);
    }
  };

  const handleFavorite = () => {
    if (favorited) {
      setFavorited(false);
    } else {
      setFavorited(true);
      onFavorite?.(drama.dramaId);
    }
  };

  return (
    <div className="yyc-drama-card" onClick={() => onClick?.(drama.dramaId)}>
      <div className="yyc-drama-card__cover">
        <Image src={drama.coverImage} alt={drama.title} />
        <span className="yyc-drama-card__episodes">
          {drama.publishedEpisodes}/{drama.totalEpisodes}é›†
        </span>
      </div>
      <div className="yyc-drama-card__info">
        <h3 className="yyc-drama-card__title">{drama.title}</h3>
        <p className="yyc-drama-card__description">{drama.description}</p>
        <div className="yyc-drama-card__stats">
          <span>ğŸ‘ {drama.viewCount}</span>
          <span>ğŸ‘ {drama.likeCount}</span>
          <span>ğŸ’¬ {drama.commentCount}</span>
        </div>
      </div>
      {showActions && (
        <div className="yyc-drama-card__actions">
          <Button
            variant="ghost"
            size="small"
            icon={liked ? 'â¤ï¸' : 'ğŸ¤'}
            onClick={handleLike}
          />
          <Button
            variant="ghost"
            size="small"
            icon={favorited ? 'â­' : 'â˜†'}
            onClick={handleFavorite}
          />
          <Button
            variant="ghost"
            size="small"
            icon="ğŸ“¤"
            onClick={() => onShare?.(drama.dramaId)}
          />
        </div>
      )}
    </div>
  );
};
```

#### 4.3 å¸ƒå±€ç»„ä»¶

**Containerç»„ä»¶**
```typescript
// shared/components/layout/Container.tsx
import React from 'react';
import { cn } from '@/utils/cn';

export interface ContainerProps {
  children: React.ReactNode;
  className?: string;
  maxWidth?: 'sm' | 'md' | 'lg' | 'xl' | 'full';
}

export const Container: React.FC<ContainerProps> = ({
  children,
  className,
  maxWidth = 'lg',
}) => {
  return (
    <div className={cn('yyc-container', `yyc-container--${maxWidth}`, className)}>
      {children}
    </div>
  );
};
```

**Gridç»„ä»¶**
```typescript
// shared/components/layout/Grid.tsx
import React from 'react';
import { cn } from '@/utils/cn';

export interface GridProps {
  children: React.ReactNode;
  cols?: number;
  gap?: number;
  className?: string;
}

export const Grid: React.FC<GridProps> = ({
  children,
  cols = 3,
  gap = 16,
  className,
}) => {
  const style = {
    display: 'grid',
    gridTemplateColumns: `repeat(${cols}, 1fr)`,
    gap: `${gap}px`,
  };

  return (
    <div className={cn('yyc-grid', className)} style={style}>
      {children}
    </div>
  );
};
```

### 5. åç«¯é€šç”¨ç»„ä»¶è®¾è®¡

#### 5.1 ä¸­é—´ä»¶ç»„ä»¶

**è®¤è¯ä¸­é—´ä»¶**
```typescript
// shared/middleware/auth.middleware.ts
import { Context, Next } from 'hono';
import { verifyToken } from '@/utils/jwt';
import { UnauthorizedError } from '@/errors';

export const authMiddleware = async (c: Context, next: Next) => {
  const token = c.req.header('Authorization')?.replace('Bearer ', '');

  if (!token) {
    throw new UnauthorizedError('æœªæä¾›è®¤è¯ä»¤ç‰Œ');
  }

  try {
    const decoded = verifyToken(token);
    c.set('userId', decoded.userId);
    c.set('userRole', decoded.role);
    await next();
  } catch (error) {
    throw new UnauthorizedError('æ— æ•ˆçš„è®¤è¯ä»¤ç‰Œ');
  }
};
```

**è§’è‰²ä¸­é—´ä»¶**
```typescript
// shared/middleware/role.middleware.ts
import { Context, Next } from 'hono';
import { ForbiddenError } from '@/errors';

export const roleMiddleware = (roles: string[]) => {
  return async (c: Context, next: Next) => {
    const userRole = c.get('userRole');

    if (!roles.includes(userRole)) {
      throw new ForbiddenError('æƒé™ä¸è¶³');
    }

    await next();
  };
};
```

**é™æµä¸­é—´ä»¶**
```typescript
// shared/middleware/rateLimit.middleware.ts
import { Context, Next } from 'hono';
import { TooManyRequestsError } from '@/errors';

interface RateLimitConfig {
  windowMs: number;
  maxRequests: number;
}

const requestMap = new Map<string, { count: number; resetTime: number }>();

export const rateLimitMiddleware = (config: RateLimitConfig) => {
  return async (c: Context, next: Next) => {
    const clientId = c.req.header('X-Client-ID') || c.req.header('X-Forwarded-For') || 'unknown';
    const now = Date.now();

    let clientData = requestMap.get(clientId);

    if (!clientData || now > clientData.resetTime) {
      clientData = {
        count: 0,
        resetTime: now + config.windowMs,
      };
      requestMap.set(clientId, clientData);
    }

    if (clientData.count >= config.maxRequests) {
      throw new TooManyRequestsError('è¯·æ±‚è¿‡äºé¢‘ç¹');
    }

    clientData.count++;
    await next();
  };
};
```

#### 5.2 éªŒè¯ç»„ä»¶

**è¯·æ±‚éªŒè¯å™¨**
```typescript
// shared/validators/request.validator.ts
import { z } from 'zod';

export const createUserSchema = z.object({
  email: z.string().email('é‚®ç®±æ ¼å¼ä¸æ­£ç¡®'),
  password: z.string().min(8, 'å¯†ç è‡³å°‘8ä½'),
  nickname: z.string().min(2, 'æ˜µç§°è‡³å°‘2ä½'),
  phone: z.string().regex(/^1[3-9]\d{9}$/, 'æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®').optional(),
  bio: z.string().max(500, 'ç®€ä»‹æœ€å¤š500å­—').optional(),
});

export const updateUserSchema = z.object({
  nickname: z.string().min(2, 'æ˜µç§°è‡³å°‘2ä½').optional(),
  phone: z.string().regex(/^1[3-9]\d{9}$/, 'æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®').optional(),
  bio: z.string().max(500, 'ç®€ä»‹æœ€å¤š500å­—').optional(),
  avatar: z.string().url('å¤´åƒURLæ ¼å¼ä¸æ­£ç¡®').optional(),
});

export const createDramaSchema = z.object({
  title: z.string().min(2, 'æ ‡é¢˜è‡³å°‘2ä½').max(100, 'æ ‡é¢˜æœ€å¤š100å­—'),
  description: z.string().min(10, 'ç®€ä»‹è‡³å°‘10å­—').max(500, 'ç®€ä»‹æœ€å¤š500å­—'),
  coverImage: z.string().url('å°é¢å›¾URLæ ¼å¼ä¸æ­£ç¡®'),
  posterImage: z.string().url('æµ·æŠ¥å›¾URLæ ¼å¼ä¸æ­£ç¡®').optional(),
  categoryIds: z.array(z.string()).min(1, 'è‡³å°‘é€‰æ‹©ä¸€ä¸ªåˆ†ç±»'),
  tags: z.array(z.string()).optional(),
  totalEpisodes: z.number().min(1, 'è‡³å°‘1é›†'),
});
```

**éªŒè¯ä¸­é—´ä»¶**
```typescript
// shared/middleware/validation.middleware.ts
import { Context, Next } from 'hono';
import { z } from 'zod';
import { ValidationError } from '@/errors';

export const validationMiddleware = <T extends z.ZodTypeAny>(schema: T) => {
  return async (c: Context, next: Next) => {
    try {
      const body = await c.req.json();
      const validatedData = schema.parse(body);
      c.set('validatedData', validatedData);
      await next();
    } catch (error) {
      if (error instanceof z.ZodError) {
        throw new ValidationError(error.errors[0].message);
      }
      throw error;
    }
  };
};
```

#### 5.3 é”™è¯¯å¤„ç†ç»„ä»¶

**é”™è¯¯å¤„ç†å™¨**
```typescript
// shared/errors/error.handler.ts
import { Context, Next } from 'hono';
import { AppError, NotFoundError, UnauthorizedError, ForbiddenError, ValidationError } from '@/errors';

export const errorHandler = async (c: Context, next: Next) => {
  try {
    await next();
  } catch (error) {
    console.error('Error:', error);

    if (error instanceof AppError) {
      return c.json(
        {
          success: false,
          error: {
            code: error.code,
            message: error.message,
          },
        },
        error.statusCode
      );
    }

    if (error instanceof z.ZodError) {
      return c.json(
        {
          success: false,
          error: {
            code: 'VALIDATION_ERROR',
            message: error.errors[0].message,
          },
        },
        400
      );
    }

    return c.json(
      {
        success: false,
        error: {
          code: 'INTERNAL_SERVER_ERROR',
          message: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯',
        },
      },
      500
    );
  }
};
```

**é”™è¯¯ç±»**
```typescript
// shared/errors/app.error.ts
export class AppError extends Error {
  constructor(
    public message: string,
    public statusCode: number = 500,
    public code: string = 'INTERNAL_SERVER_ERROR'
  ) {
    super(message);
    this.name = 'AppError';
  }
}

export class NotFoundError extends AppError {
  constructor(message: string = 'èµ„æºä¸å­˜åœ¨') {
    super(message, 404, 'NOT_FOUND');
    this.name = 'NotFoundError';
  }
}

export class UnauthorizedError extends AppError {
  constructor(message: string = 'æœªæˆæƒ') {
    super(message, 401, 'UNAUTHORIZED');
    this.name = 'UnauthorizedError';
  }
}

export class ForbiddenError extends AppError {
  constructor(message: string = 'ç¦æ­¢è®¿é—®') {
    super(message, 403, 'FORBIDDEN');
    this.name = 'ForbiddenError';
  }
}

export class ValidationError extends AppError {
  constructor(message: string = 'å‚æ•°éªŒè¯å¤±è´¥') {
    super(message, 400, 'VALIDATION_ERROR');
    this.name = 'ValidationError';
  }
}

export class TooManyRequestsError extends AppError {
  constructor(message: string = 'è¯·æ±‚è¿‡äºé¢‘ç¹') {
    super(message, 429, 'TOO_MANY_REQUESTS');
    this.name = 'TooManyRequestsError';
  }
}
```

### 6. ç»„ä»¶å¤ç”¨è§„èŒƒ

#### 6.1 ç»„ä»¶å‘½åè§„èŒƒ

**å‘½åè§„åˆ™**
- ç»„ä»¶åç§°ä½¿ç”¨PascalCase
- ç»„ä»¶æ–‡ä»¶åä¸ç»„ä»¶åç§°ä¸€è‡´
- ç»„ä»¶ç›®å½•æŒ‰åŠŸèƒ½åˆ†ç±»

**ç¤ºä¾‹**
```
components/
â”œâ”€â”€ ui/                    # UIåŸºç¡€ç»„ä»¶
â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”œâ”€â”€ Input.tsx
â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â””â”€â”€ Avatar.tsx
â”œâ”€â”€ business/              # ä¸šåŠ¡ç»„ä»¶
â”‚   â”œâ”€â”€ UserCard.tsx
â”‚   â”œâ”€â”€ DramaCard.tsx
â”‚   â””â”€â”€ CommentList.tsx
â””â”€â”€ layout/               # å¸ƒå±€ç»„ä»¶
    â”œâ”€â”€ Container.tsx
    â”œâ”€â”€ Grid.tsx
    â””â”€â”€ Header.tsx
```

#### 6.2 ç»„ä»¶æ–‡æ¡£è§„èŒƒ

**ç»„ä»¶æ–‡æ¡£æ¨¡æ¿**
```typescript
/**
 * @file Buttonç»„ä»¶
 * @description é€šç”¨æŒ‰é’®ç»„ä»¶ï¼Œæ”¯æŒå¤šç§æ ·å¼å’Œå°ºå¯¸
 * @component Button
 * @example
 * ```tsx
 * <Button variant="primary" size="medium" onClick={handleClick}>
 *   ç‚¹å‡»æˆ‘
 * </Button>
 * ```
 * @author YYCÂ³
 * @version 1.0.0
 */

import React from 'react';
import { cn } from '@/utils/cn';

export interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  /** æŒ‰é’®æ ·å¼å˜ä½“ */
  variant?: 'primary' | 'secondary' | 'danger' | 'ghost';
  /** æŒ‰é’®å°ºå¯¸ */
  size?: 'small' | 'medium' | 'large';
  /** æ˜¯å¦åŠ è½½ä¸­ */
  loading?: boolean;
  /** å›¾æ ‡ */
  icon?: React.ReactNode;
  /** æ˜¯å¦å—çº§æŒ‰é’® */
  block?: boolean;
}

export const Button: React.FC<ButtonProps> = ({
  variant = 'primary',
  size = 'medium',
  loading = false,
  icon,
  block = false,
  className,
  disabled,
  children,
  ...props
}) => {
  return (
    <button
      className={cn(
        'yyc-button',
        `yyc-button--${variant}`,
        `yyc-button--${size}`,
        block && 'yyc-button--block',
        loading && 'yyc-button--loading',
        className
      )}
      disabled={disabled || loading}
      {...props}
    >
      {loading && <span className="yyc-button__spinner" />}
      {icon && <span className="yyc-button__icon">{icon}</span>}
      <span className="yyc-button__content">{children}</span>
    </button>
  );
};
```

#### 6.3 ç»„ä»¶æµ‹è¯•è§„èŒƒ

**æµ‹è¯•æ¨¡æ¿**
```typescript
// shared/components/ui/Button.test.tsx
import { describe, it, expect } from 'vitest';
import { render, screen, fireEvent } from '@testing-library/react';
import { Button } from './Button';

describe('Button', () => {
  it('should render button with text', () => {
    render(<Button>Click me</Button>);
    expect(screen.getByText('Click me')).toBeInTheDocument();
  });

  it('should call onClick when clicked', () => {
    const handleClick = vi.fn();
    render(<Button onClick={handleClick}>Click me</Button>);
    fireEvent.click(screen.getByText('Click me'));
    expect(handleClick).toHaveBeenCalledTimes(1);
  });

  it('should be disabled when disabled prop is true', () => {
    render(<Button disabled>Click me</Button>);
    expect(screen.getByRole('button')).toBeDisabled();
  });

  it('should show loading state when loading prop is true', () => {
    render(<Button loading>Click me</Button>);
    expect(screen.getByText('åŠ è½½ä¸­...')).toBeInTheDocument();
  });

  it('should apply correct variant class', () => {
    const { container } = render(<Button variant="secondary">Click me</Button>);
    expect(container.firstChild).toHaveClass('yyc-button--secondary');
  });

  it('should apply correct size class', () => {
    const { container } = render(<Button size="large">Click me</Button>);
    expect(container.firstChild).toHaveClass('yyc-button--large');
  });
});
```

### 7. ç»„ä»¶æ€§èƒ½ä¼˜åŒ–

#### 7.1 Reactæ€§èƒ½ä¼˜åŒ–

**ä½¿ç”¨React.memo**
```typescript
export const UserCard = React.memo<UserCardProps>(({ user }) => {
  return (
    <div className="user-card">
      <Avatar src={user.avatar} alt={user.nickname} />
      <h3>{user.nickname}</h3>
    </div>
  );
});
```

**ä½¿ç”¨useMemo**
```typescript
export const DramaList: React.FC<DramaListProps> = ({ dramas }) => {
  const sortedDramas = useMemo(() => {
    return [...dramas].sort((a, b) => b.viewCount - a.viewCount);
  }, [dramas]);

  return (
    <div>
      {sortedDramas.map(drama => (
        <DramaCard key={drama.dramaId} drama={drama} />
      ))}
    </div>
  );
};
```

**ä½¿ç”¨useCallback**
```typescript
export const UserActions: React.FC<UserActionsProps> = ({ userId, onFollow, onUnfollow }) => {
  const handleFollow = useCallback(() => {
    onFollow(userId);
  }, [userId, onFollow]);

  const handleUnfollow = useCallback(() => {
    onUnfollow(userId);
  }, [userId, onUnfollow]);

  return (
    <div>
      <Button onClick={handleFollow}>å…³æ³¨</Button>
      <Button onClick={handleUnfollow}>å–æ¶ˆå…³æ³¨</Button>
    </div>
  );
};
```

#### 7.2 ä»£ç åˆ†å‰²

**åŠ¨æ€å¯¼å…¥**
```typescript
import { lazy, Suspense } from 'react';

const DramaCard = lazy(() => import('./DramaCard'));
const UserCard = lazy(() => import('./UserCard'));

export const DramaList: React.FC = ({ dramas }) => {
  return (
    <Suspense fallback={<div>åŠ è½½ä¸­...</div>}>
      {dramas.map(drama => (
        <DramaCard key={drama.dramaId} drama={drama} />
      ))}
    </Suspense>
  );
};
```

### 8. æ€»ç»“

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº†YYC3-Short-DramaçŸ­å‰§å¹³å°çš„é€šç”¨ç»„ä»¶å°è£…è®¾è®¡ï¼ŒåŒ…æ‹¬å‰ç«¯/åç«¯é€šç”¨ç»„ä»¶çš„å°è£…åŸåˆ™ä¸å¤ç”¨è§„èŒƒã€‚é€šè¿‡è¿™äº›è®¾è®¡åŸåˆ™å’Œè§„èŒƒçš„å®æ–½ï¼Œå¯ä»¥ç¡®ä¿ç»„ä»¶å¼€å‘é«˜æ•ˆã€ç¨³å®šã€å¯ç»´æŠ¤ï¼Œä¸ºå¹³å°çš„ç¨³å®šè¿è¡Œå’Œä¸šåŠ¡æ‰©å±•æä¾›åšå®çš„ç»„ä»¶åŸºç¡€ã€‚

---

> ã€Œ***YanYuCloudCube***ã€
> ã€Œ***<admin@0379.email>***ã€
> ã€Œ***Words Initiate Quadrants, Language Serves as Core for the Future***ã€
> ã€Œ***All things converge in the cloud pivot; Deep stacks ignite a new era of intelligence***ã€
