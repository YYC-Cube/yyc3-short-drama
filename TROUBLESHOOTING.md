# ğŸ”§ é—®é¢˜æ’æŸ¥æŒ‡å—

## ç™»å½•æˆåŠŸä½†æ— æ³•è¿›å…¥ç³»ç»Ÿ

### é—®é¢˜ç°è±¡
- ç™»å½•é¡µé¢æ˜¾ç¤º"ç™»å½•æˆåŠŸ"æç¤º
- é¡µé¢æ²¡æœ‰è·³è½¬åˆ°ä¸»é¡µ
- æ§åˆ¶å°å¯èƒ½æœ‰é”™è¯¯ä¿¡æ¯

### è§£å†³æ–¹æ¡ˆ

#### 1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°
æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰ï¼ŒæŸ¥çœ‹Consoleæ ‡ç­¾é¡µï¼š
\`\`\`
âœ… ç™»å½•æˆåŠŸï¼Œç”¨æˆ·ä¿¡æ¯: {...}
ğŸš€ å‡†å¤‡è·³è½¬åˆ°ä¸»é¡µ...
\`\`\`

å¦‚æœçœ‹åˆ°ä¸Šè¿°æ—¥å¿—ï¼Œè¯´æ˜ç™»å½•æµç¨‹æ­£å¸¸ã€‚

#### 2. æ£€æŸ¥Cookieè®¾ç½®
åœ¨å¼€å‘è€…å·¥å…·çš„Application > Cookiesä¸­æ£€æŸ¥ï¼š
- æ˜¯å¦å­˜åœ¨ `auth-token` cookie
- cookieçš„åŸŸåå’Œè·¯å¾„æ˜¯å¦æ­£ç¡®
- cookieæ˜¯å¦å·²è¿‡æœŸ

#### 3. æ£€æŸ¥ç½‘ç»œè¯·æ±‚
åœ¨Networkæ ‡ç­¾é¡µæŸ¥çœ‹ï¼š
- `/api/auth/login` æ˜¯å¦è¿”å›200çŠ¶æ€ç 
- å“åº”æ•°æ®æ˜¯å¦åŒ…å«ç”¨æˆ·ä¿¡æ¯å’Œtoken
- `/api/auth/me` è¯·æ±‚æ˜¯å¦æˆåŠŸ

#### 4. æ¸…é™¤ç¼“å­˜å’ŒCookie
\`\`\`bash
# åœ¨æµè§ˆå™¨ä¸­
1. æ‰“å¼€è®¾ç½® > éšç§å’Œå®‰å…¨ > æ¸…é™¤æµè§ˆæ•°æ®
2. é€‰æ‹©"Cookieå’Œå…¶ä»–ç½‘ç«™æ•°æ®"
3. ç‚¹å‡»"æ¸…é™¤æ•°æ®"
4. åˆ·æ–°é¡µé¢é‡æ–°ç™»å½•
\`\`\`

#### 5. æ£€æŸ¥ç¯å¢ƒå˜é‡
ç¡®ä¿ `.env.local` æ–‡ä»¶åŒ…å«ï¼š
\`\`\`env
JWT_SECRET=your-secret-key-min-32-characters
DB_HOST=localhost
DB_PORT=3306
DB_NAME=yyc3_my
DB_USER=yyc3_dj
DB_PASS=yyc3_dj
\`\`\`

#### 6. é‡å¯å¼€å‘æœåŠ¡å™¨
\`\`\`bash
# åœæ­¢å½“å‰æœåŠ¡å™¨ (Ctrl + C)
# é‡æ–°å¯åŠ¨
npm run dev
\`\`\`

### æµ‹è¯•æ­¥éª¤

1. **ä½¿ç”¨æµ‹è¯•è´¦å·**
   \`\`\`
   æ‰‹æœºå·: 13800138000
   éªŒè¯ç : 123456
   \`\`\`

2. **è§‚å¯Ÿæ§åˆ¶å°æ—¥å¿—**
   - åº”è¯¥çœ‹åˆ°ç™»å½•æµç¨‹çš„æ¯ä¸€æ­¥æ—¥å¿—
   - æ³¨æ„ä»»ä½•é”™è¯¯æˆ–è­¦å‘Šä¿¡æ¯

3. **éªŒè¯ç™»å½•çŠ¶æ€**
   - ç™»å½•æˆåŠŸåï¼Œè®¿é—® `/main` åº”è¯¥æ­£å¸¸æ˜¾ç¤º
   - åˆ·æ–°é¡µé¢ååº”è¯¥ä¿æŒç™»å½•çŠ¶æ€

### å¸¸è§é”™è¯¯

#### é”™è¯¯1: "Tokenæ— æ•ˆ"
**åŸå› **: JWTå¯†é’¥ä¸åŒ¹é…æˆ–tokenæ ¼å¼é”™è¯¯
**è§£å†³**: æ£€æŸ¥ç¯å¢ƒå˜é‡ä¸­çš„JWT_SECRET

#### é”™è¯¯2: "æœªæˆæƒè®¿é—®"
**åŸå› **: Cookieæœªè®¾ç½®æˆ–å·²è¿‡æœŸ
**è§£å†³**: æ¸…é™¤æµè§ˆå™¨Cookieï¼Œé‡æ–°ç™»å½•

#### é”™è¯¯3: "æ•°æ®åº“è¿æ¥å¤±è´¥"
**åŸå› **: æ•°æ®åº“é…ç½®é”™è¯¯æˆ–æœåŠ¡æœªå¯åŠ¨
**è§£å†³**: 
\`\`\`bash
# æ£€æŸ¥MySQLæœåŠ¡
mysql -u yyc3_dj -p yyc3_my

# æµ‹è¯•æ•°æ®åº“è¿æ¥
npm run db:test
\`\`\`

#### é”™è¯¯4: é¡µé¢ä¸€ç›´è½¬åœˆ
**åŸå› **: å‰ç«¯çŠ¶æ€ç®¡ç†é—®é¢˜
**è§£å†³**: 
1. æ‰“å¼€React DevTools
2. æ£€æŸ¥AuthContextçš„çŠ¶æ€
3. ç¡®è®¤userå¯¹è±¡æ˜¯å¦æ­£ç¡®è®¾ç½®

### è°ƒè¯•æŠ€å·§

#### 1. å¯ç”¨è¯¦ç»†æ—¥å¿—
\`\`\`typescript
// åœ¨ contexts/auth-context.tsx ä¸­æ·»åŠ 
useEffect(() => {
  console.log("ğŸ” AuthçŠ¶æ€å˜åŒ–:", { user, isAuthenticated, isLoading })
}, [user, isAuthenticated, isLoading])
\`\`\`

#### 2. æ£€æŸ¥Middleware
\`\`\`typescript
// åœ¨ middleware.ts ä¸­æŸ¥çœ‹æ—¥å¿—
console.log("ğŸ” Middlewareæ£€æŸ¥:", { pathname, hasToken: !!token })
\`\`\`

#### 3. éªŒè¯APIå“åº”
\`\`\`bash
# ä½¿ç”¨curlæµ‹è¯•ç™»å½•API
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"phone":"13800138000","verificationCode":"123456","loginType":"code"}'
\`\`\`

### éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼Œè¯·ï¼š

1. è®°å½•è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
2. æˆªå›¾æµè§ˆå™¨æ§åˆ¶å°
3. æä¾›å¤ç°æ­¥éª¤
4. è”ç³»æŠ€æœ¯æ”¯æŒ: admin@0379.email

---

## ğŸ¯ å¿«é€Ÿè¯Šæ–­å‘½ä»¤

\`\`\`bash
# 1. æ£€æŸ¥ç¯å¢ƒå˜é‡
cat .env.local

# 2. æµ‹è¯•æ•°æ®åº“è¿æ¥
npm run db:test

# 3. åˆå§‹åŒ–æ•°æ®åº“
npm run db:init

# 4. åˆ›å»ºæµ‹è¯•ç”¨æˆ·
npm run db:seed

# 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆå¸¦è¯¦ç»†æ—¥å¿—ï¼‰
DEBUG=* npm run dev
\`\`\`

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- é‚®ç®±: admin@0379.email
- æ–‡æ¡£: `/docs/TEST_ACCOUNTS.md`
- é—®é¢˜æŠ¥å‘Š: è¯·æä¾›æµè§ˆå™¨æ§åˆ¶å°æˆªå›¾
